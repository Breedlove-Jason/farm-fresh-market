<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Add New Farm - Farm Fresh Market</title>
    <!-- Bootstrap 5 CSS (Lux theme from Bootswatch) -->
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.2/dist/lux/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/form.css">
</head>
<body>
    <!-- Hero Section -->
    <div class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <a href="/farms" class="btn btn-back mb-3">
                        <i class="fas fa-arrow-left me-2"></i>Back to Farms
                    </a>
                    <h1 class="display-4 fw-bold mb-2">
                        <i class="fas fa-plus-circle me-3"></i>Add New Farm
                    </h1>
                    <p class="lead">Register a new farm to our marketplace</p>
                </div>
                <div class="col-lg-4 text-end">
                    <i class="fas fa-tractor" style="font-size: 6rem; opacity: 0.3;"></i>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Form Container -->
        <div class="row justify-content-center">
            <div class="col-lg-8 col-xl-6">
                <div class="form-container">
                    <!-- Form Header -->
                    <div class="form-header">
                        <h2 class="fw-bold text-dark mb-2">
                            <i class="fas fa-tractor text-primary me-2"></i>
                            Farm Information
                        </h2>
                        <p class="text-muted mb-0">Fill in the details for your new farm</p>
                    </div>

                    <!-- Farm Form -->
                    <form action="/farms" method="POST" id="farmForm">
                        <!-- Farm Name -->
                        <div class="form-floating">
                            <input 
                                type="text" 
                                class="form-control" 
                                id="farmName" 
                                name="name" 
                                placeholder="Farm Name"
                                required
                                autocomplete="off"
                            >
                            <label for="farmName">
                                <i class="fas fa-signature input-icon"></i>Farm Name
                            </label>
                        </div>

                        <!-- Farm Type -->
                        <div class="form-floating">
                            <select class="form-select" id="farmType" name="type" required>
                                <option value="" disabled selected>Choose a farm type...</option>
                                <option value="Dairy">ü•õ Dairy Farm</option>
                                <option value="Vegetable">ü•ï Vegetable Farm</option>
                                <option value="Fruit">üçé Fruit Orchard</option>
                                <option value="Livestock">üêÑ Livestock Farm</option>
                                <option value="Mixed">üåæ Mixed Farm</option>
                            </select>
                            <label for="farmType">
                                <i class="fas fa-list input-icon"></i>Farm Type
                            </label>
                            <!-- Type Preview -->
                            <div class="category-preview" id="typePreview">
                                <i class="fas fa-tractor fa-2x mb-2" id="typeIcon"></i>
                                <h6 class="mb-0" id="typeText">Farm Type Selected</h6>
                            </div>
                        </div>

                        <!-- Farm Location -->
                        <div class="form-floating">
                            <input 
                                type="text" 
                                class="form-control" 
                                id="farmLocation" 
                                name="location" 
                                placeholder="Farm Location"
                                required
                                autocomplete="off"
                            >
                            <label for="farmLocation">
                                <i class="fas fa-map-marker-alt input-icon"></i>Farm Location
                            </label>
                        </div>

                        <!-- Farm Email -->
                        <div class="form-floating">
                            <input 
                                type="email" 
                                class="form-control" 
                                id="farmEmail" 
                                name="email" 
                                placeholder="farm@example.com"
                                required
                                autocomplete="off"
                            >
                            <label for="farmEmail">
                                <i class="fas fa-envelope input-icon"></i>Email Address
                            </label>
                        </div>

                        <!-- Form Actions -->
                        <div class="row mt-4">
                            <div class="col-12">
                                <button type="submit" class="btn btn-submit">
                                    <i class="fas fa-plus-circle me-2"></i>Register Farm
                                </button>
                            </div>
                        </div>

                        <!-- Form Help Text -->
                        <div class="text-center mt-3">
                            <small class="text-muted">
                                <i class="fas fa-info-circle me-1"></i>
                                All fields are required. Farm will be registered to our marketplace immediately.
                            </small>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Farm Preview Section -->
        <div class="row justify-content-center mt-4" id="farmPreview" style="display: none;">
            <div class="col-lg-8 col-xl-6">
                <div class="card border-0 shadow-sm" style="border-radius: 20px;">
                    <div class="card-header bg-transparent border-0 text-center py-3">
                        <h5 class="mb-0 fw-bold text-primary">
                            <i class="fas fa-eye me-2"></i>Farm Preview
                        </h5>
                    </div>
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="fas fa-tractor fa-3x text-primary mb-2" id="previewIcon"></i>
                            <h4 class="fw-bold" id="previewName">Farm Name</h4>
                        </div>
                        <div class="row">
                            <div class="col-4">
                                <div class="bg-light rounded p-2">
                                    <small class="text-muted">Type</small>
                                    <div class="fw-bold" id="previewType">Farm Type</div>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="bg-light rounded p-2">
                                    <small class="text-muted">Location</small>
                                    <div class="fw-bold" id="previewLocation">Location</div>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="bg-light rounded p-2">
                                    <small class="text-muted">Email</small>
                                    <div class="fw-bold" id="previewEmail">Email</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5><i class="fas fa-seedling me-2"></i>Farm Fresh Market</h5>
                    <p class="text-muted">Your trusted source for fresh, organic produce</p>
                </div>
                <div class="col-md-6 text-end">
                    <p class="text-muted mb-0">
                        <i class="fas fa-phone me-2"></i>Call us: (555) 123-4567
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Form elements
        const farmName = document.getElementById('farmName');
        const farmType = document.getElementById('farmType');
        const farmLocation = document.getElementById('farmLocation');
        const farmEmail = document.getElementById('farmEmail');
        const form = document.getElementById('farmForm');

        // Preview elements
        const typePreview = document.getElementById('typePreview');
        const typeIcon = document.getElementById('typeIcon');
        const typeText = document.getElementById('typeText');

        // Farm preview card
        const farmPreview = document.getElementById('farmPreview');
        const previewIcon = document.getElementById('previewIcon');
        const previewName = document.getElementById('previewName');
        const previewType = document.getElementById('previewType');
        const previewLocation = document.getElementById('previewLocation');
        const previewEmail = document.getElementById('previewEmail');

        // Farm type selector handler
        farmType.addEventListener('change', function() {
            const type = this.value;
            let icon, text, iconClass;

            switch(type) {
                case 'Dairy':
                    icon = 'fas fa-cheese';
                    iconClass = 'text-warning';
                    text = 'Dairy Farm';
                    break;
                case 'Vegetable':
                    icon = 'fas fa-carrot';
                    iconClass = 'text-success';
                    text = 'Vegetable Farm';
                    break;
                case 'Fruit':
                    icon = 'fas fa-apple-alt';
                    iconClass = 'text-danger';
                    text = 'Fruit Orchard';
                    break;
                case 'Livestock':
                    icon = 'fas fa-horse';
                    iconClass = 'text-info';
                    text = 'Livestock Farm';
                    break;
                case 'Mixed':
                    icon = 'fas fa-seedling';
                    iconClass = 'text-primary';
                    text = 'Mixed Farm';
                    break;
                default:
                    typePreview.style.display = 'none';
                    return;
            }

            typeIcon.className = icon + ' fa-2x mb-2 ' + iconClass;
            typeText.textContent = text;
            typePreview.style.display = 'block';

            // Update preview card
            previewIcon.className = icon + ' fa-3x text-primary mb-2';
            previewType.textContent = text;

            updatePreview();
        });

        // Farm name handler
        farmName.addEventListener('input', function() {
            previewName.textContent = this.value || 'Farm Name';
            updatePreview();
        });

        // Farm location handler
        farmLocation.addEventListener('input', function() {
            previewLocation.textContent = this.value || 'Location';
            updatePreview();
        });

        // Farm email handler
        farmEmail.addEventListener('input', function() {
            previewEmail.textContent = this.value || 'Email';
            updatePreview();
        });

        // Update preview visibility
        function updatePreview() {
            const hasName = farmName.value.trim();
            const hasType = farmType.value;
            const hasLocation = farmLocation.value.trim();
            const hasEmail = farmEmail.value.trim();

            if (hasName && hasType && hasLocation && hasEmail) {
                farmPreview.style.display = 'block';
                farmPreview.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            } else {
                farmPreview.style.display = 'none';
            }
        }

        // Form submission with loading state
        form.addEventListener('submit', function(e) {
            const submitBtn = form.querySelector('.btn-submit');
            const originalText = submitBtn.innerHTML;

            // Add loading state
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Registering Farm...';
            submitBtn.disabled = true;

            // Re-enable after 3 seconds (in case of errors)
            setTimeout(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 3000);
        });

        // Add entrance animations
        document.addEventListener('DOMContentLoaded', function() {
            const formContainer = document.querySelector('.form-container');
            formContainer.style.opacity = '0';
            formContainer.style.transform = 'translateY(30px)';

            setTimeout(() => {
                formContainer.style.transition = 'all 0.6s ease';
                formContainer.style.opacity = '1';
                formContainer.style.transform = 'translateY(0)';
            }, 200);
        });

        // Form validation feedback
        const inputs = document.querySelectorAll('.form-control, .form-select');
        inputs.forEach(input => {
            input.addEventListener('blur', function() {
                if (this.checkValidity()) {
                    this.classList.remove('is-invalid');
                    this.classList.add('is-valid');
                } else {
                    this.classList.remove('is-valid');
                    this.classList.add('is-invalid');
                }
            });
        });
    </script>
</body>
</html>
